<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lab 3: JS Animation - Clean Edition</title>
    <style>
        /* --- HỆ THỐNG BIẾN & THIẾT KẾ --- */
        :root {
            --primary: #007aff;
            --bg-light: #f5f5f7;
            --bg-dark: #1d1d1f;
            --card-light: rgba(255, 255, 255, 0.9);
            --card-dark: rgba(45, 45, 45, 0.9);
            --text-light: #1d1d1f;
            --text-dark: #f5f5f7;
            --accent: #ff3b30;
            --transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg-light);
            color: var(--text-light);
            transition: var(--transition);
        }

        body.dark {
            background-color: var(--bg-dark);
            color: var(--text-dark);
        }

        /* --- BÀI 2: NAVIGATION --- */
        .navbar {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--card-light);
            backdrop-filter: blur(20px);
            padding: 8px;
            border-radius: 100px;
            z-index: 1000;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            border: 1px solid rgba(255,255,255,0.4);
            display: flex;
            gap: 5px;
        }

        body.dark .navbar {
            background: var(--card-dark);
            border-color: rgba(255,255,255,0.1);
        }

        .nav-link {
            text-decoration: none;
            color: inherit;
            font-size: 0.85rem;
            font-weight: 500;
            padding: 10px 20px;
            border-radius: 50px;
            transition: var(--transition);
            opacity: 0.6;
        }

        .nav-link.active {
            background: var(--primary);
            color: white;
            opacity: 1;
            box-shadow: 0 4px 12px rgba(0,122,255,0.3);
        }

        /* --- LAYOUT CHUNG --- */
        section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 100px 20px;
        }

        .container {
            max-width: 900px;
            width: 100%;
            text-align: center;
            background: var(--card-light);
            padding: 60px 40px;
            border-radius: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.03);
            border: 1px solid rgba(255,255,255,0.5);
            position: relative;
            overflow: hidden; /* Đảm bảo hiệu ứng không tràn ra ngoài card */
        }

        body.dark .container {
            background: var(--card-dark);
            border-color: rgba(255,255,255,0.05);
        }

        h2 { font-size: 2.2rem; font-weight: 700; margin-bottom: 15px; color: var(--primary); }
        .sub-title { opacity: 0.6; font-size: 1.1rem; margin-bottom: 40px; }

        /* --- BÀI 1: BUTTON --- */
        .btn-toggle {
            padding: 16px 35px;
            font-size: 1rem;
            font-weight: 600;
            border: none;
            border-radius: 16px;
            background: var(--primary);
            color: white;
            cursor: pointer;
            transition: var(--transition);
        }

        /* --- BÀI 3: REVEAL CARDS --- */
        .grid { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; }
        .box {
            width: 200px; height: 140px;
            background: linear-gradient(135deg, #007aff, #00c7ff);
            border-radius: 20px;
            display: flex; align-items: center; justify-content: center;
            color: white; font-weight: 600;
            opacity: 0;
            transform: translateY(40px);
            transition: all 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
        }
        .box.show { opacity: 1; transform: translateY(0); }

        /* --- BÀI 4: JUMP --- */
        .jump-btn {
            background: var(--accent);
            padding: 18px 48px;
            border: none;
            border-radius: 50px;
            color: white;
            font-weight: 700;
            cursor: pointer;
        }
        .jump-btn.animate { animation: appleJump 0.5s ease; }
        @keyframes appleJump {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-30px); }
        }

        /* --- BÀI 5: MOUSE FOLLOWER (FIXED) --- */
        #circle {
            position: fixed;
            width: 25px;
            height: 25px;
            background: var(--accent);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            transition: transform 0.1s ease-out;
            box-shadow: 0 0 15px rgba(255, 59, 48, 0.5);
            left: 0; top: 0;
        }
    </style>
</head>
<body>

    <div id="circle"></div>

    <nav class="navbar">
        <a href="#section1" class="nav-link">B1: Theme</a>
        <a href="#section2" class="nav-link">B2 & B3: Scroll</a>
        <a href="#section3" class="nav-link">B4: Interaction</a>
        <a href="#section4" class="nav-link">B5: Mouse</a>
    </nav>

    <section id="section1">
        <div class="container">
            <h2>Lesson 1: Theme Switcher</h2>
            <p class="sub-title">Chuyển đổi giao diện Sáng/Tối mượt mà.</p>
            <button class="btn-toggle" id="themeBtn">Chuyển sang Chế độ Tối</button>
        </div>
    </section>

    <section id="section2">
        <div class="container">
            <h2>Lesson 2 & 3: Active Scroll</h2>
            <p class="sub-title">Menu tự động Highlight và các Box hiện dần khi cuộn.</p>
            <div class="grid">
                <div class="box">Card 01</div>
                <div class="box">Card 02</div>
                <div class="box">Card 03</div>
            </div>
        </div>
    </section>

    <section id="section3">
        <div class="container">
            <h2>Lesson 4: Jump Animation</h2>
            <p class="sub-title">Hiệu ứng tương tác nhảy lên khi di chuột.</p>
            <button class="jump-btn">Rê chuột vào tôi</button>
        </div>
    </section>

    <section id="section4">
        <div class="container">
            <h2>Lesson 5: Move with Mouse</h2>
            <p class="sub-title">Hình tròn đỏ sẽ bám đuổi theo con trỏ chuột của bạn trên toàn màn hình.</p>
            <p style="font-weight: 500; color: var(--accent);">Di chuyển chuột để thấy hiệu ứng bám đuổi!</p>
        </div>
    </section>

    <script>
        /* --- JAVASCRIPT LOGIC --- */

        // 1. Bài 1: Đổi nền
        const themeBtn = document.getElementById('themeBtn');
        themeBtn.addEventListener('click', () => {
            document.body.classList.toggle('dark');
            const isDark = document.body.classList.contains('dark');
            themeBtn.innerText = isDark ? "Chuyển sang Chế độ Sáng" : "Chuyển sang Chế độ Tối";
        });

        // 2 & 3. Bài 2 & 3: Scroll Events
        const sections = document.querySelectorAll('section');
        const navLinks = document.querySelectorAll('.nav-link');
        const boxes = document.querySelectorAll('.box');

        window.addEventListener('scroll', () => {
            let current = "";
            sections.forEach(sec => {
                if (pageYOffset >= (sec.offsetTop - 200)) {
                    current = sec.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href').includes(current)) link.classList.add('active');
            });

            boxes.forEach(box => {
                if (box.getBoundingClientRect().top < window.innerHeight - 100) {
                    box.classList.add('show');
                }
            });
        });

        // 4. Bài 4: Nút nhảy
        const jumpBtn = document.querySelector('.jump-btn');
        jumpBtn.addEventListener('mouseover', () => {
            jumpBtn.classList.add('animate');
            setTimeout(() => jumpBtn.classList.remove('animate'), 500);
        });

        // 5. Bài 5: Hình tròn theo chuột (Dùng Transform để mượt nhất)
        const circle = document.getElementById('circle');
        window.addEventListener('mousemove', (e) => {
            circle.style.transform = `translate(${e.clientX - 12}px, ${e.clientY - 12}px)`;
        });
    </script>
</body>
</html>